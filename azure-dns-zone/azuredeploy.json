{
	"$schema": "http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"newZoneName": {
			"type": "String",
			"defaultValue": "reddog.microsoft.com",
			"metadata": {
				"description": "The name of the DNS zone to be created."
			}
		},
		"newRecordName": {
			"type": "String",
			"defaultValue": "kube-minion",
			"metadata": {
				"description": "The name of the DNS record to be created.  The name is relative to the zone, not the FQDN."
			}
		},
		"numberOfInstances": {
			"type": "int",
			"defaultValue": 3,
			"metadata": {
				"description": "Number of DNS records to be created."
			}
		}
	},
	"resources": [{
		"type": "microsoft.network/dnszones",
		"name": "[parameters('newZoneName')]",
		"apiVersion": "2015-05-04-preview",
		"location": "global",
		"properties": {
			}
	},
	{
		"type": "microsoft.network/dnszones/a",
		"name": "[concat(parameters('newZoneName'), concat('/', parameters('newRecordName'),copyIndex()))]",
		"apiVersion": "2015-05-04-preview",
		"location": "global",
		"copy": {
			"name": "recordLoop",
			"count": "[parameters('numberOfInstances')]"
		},
		"properties": {
			"TTL": 3600,
			"ARecords": [{
				"ipv4Address": "[concat('10.11.50.1',copyIndex())]"
			}]
		},
		"dependsOn": ["[concat('Microsoft.Network/dnszones/', parameters('newZoneName'))]"]
	}]
}